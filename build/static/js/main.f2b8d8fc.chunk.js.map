{"version":3,"sources":["components/Title.js","components/Error.js","components/Filter.js","components/Notification.js","components/PersonForm.js","components/Persons.js","services/serverService.js","App.js","index.js"],"names":["Title","text","Error","message","className","Filter","newFilter","setFilter","placeholder","onChange","e","target","value","Notification","PersonForm","handleSubmit","setNewName","newName","newPhone","setNewPhone","onSubmit","type","Persons","persons","handleDelete","map","person","name","number","onClick","id","baseUrl","getAll","a","request","axios","get","response","data","create","post","console","log","edit","newObj","put","del","delete","then","App","useState","setPersons","notification","setNotification","error","setError","useEffect","webService","phoneBook","whatToShow","filter","toLowerCase","includes","event","length","personObj","concat","preventDefault","test","window","confirm","editedObj","editedPerson","newPhoneBook","alert","setTimeout","s","catch","err","deleted","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f2b8d8fc.chunk.js","sourcesContent":["const Title = ({ text }) => {\n  return <h1>{text}</h1>;\n};\n\nexport default Title;\n","const Error = ({ message }) => {\n  if (message === null) return null;\n  return <div className='error'>{message} has already been deleted</div>;\n};\n\nexport default Error;\n","const Filter = ({ newFilter, setFilter }) => {\n  return (\n    <>\n      <div>Filter shown with:</div>\n      <input\n        placeholder='insert filter here..'\n        onChange={(e) => {\n          setFilter(e.target.value);\n        }}\n        value={newFilter}\n      />\n    </>\n  );\n};\n\nexport default Filter;\n","const Notification = ({ message }) => {\n  if (message === null) return null;\n  return <div className='notification'>{message}</div>;\n};\n\nexport default Notification;\n","const PersonForm = ({\n  handleSubmit,\n  setNewName,\n  newName,\n  newPhone,\n  setNewPhone,\n}) => {\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        name:\n        <input\n          placeholder='insert name...'\n          onChange={(e) => setNewName(e.target.value)}\n          value={newName}\n        />\n      </div>\n      <div>\n        phone:\n        <input\n          type='tel'\n          placeholder='insert phone number...'\n          onChange={(e) => setNewPhone(e.target.value)}\n          value={newPhone}\n        />\n      </div>\n      <div>\n        <button type='submit'>add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","const Persons = ({ persons, handleDelete }) => {\n  return (\n    <>\n      {persons.map((person) => {\n        return (\n          <li key={person.id}>\n            {person.name} {person.number}\n            <button onClick={() => handleDelete(person.id)}>Delete</button>\n          </li>\n        );\n      })}{' '}\n    </>\n  );\n};\n\nexport default Persons;\n","import axios from 'axios';\n\nconst baseUrl = '/api/persons';\n\n//fetching all entries\n\nconst getAll = async () => {\n  const request = axios.get(baseUrl);\n  const response = await request;\n  return response.data;\n};\n\nconst create = async (person) => {\n  const request = axios.post(baseUrl, person);\n  try {\n    const response = await request;\n    return response.data;\n  } catch (err) {\n    return console.log(err.data);\n  }\n};\n\nconst edit = async (id, newObj) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObj);\n  try {\n    const response = await request;\n    return response.data;\n  } catch (err) {\n    return console.log('error');\n  }\n};\n\nconst del = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then();\n};\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default { getAll, create, edit, del };\n","import React, { useState, useEffect } from 'react';\nimport Title from './components/Title';\nimport Error from './components/Error';\nimport Filter from './components/Filter';\nimport Notification from './components/Notification';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport webService from './services/serverService';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newPhone, setNewPhone] = useState('');\n  const [newFilter, setFilter] = useState('');\n  const [notification, setNotification] = useState(null);\n  const [error, setError] = useState(null);\n\n  let handleSubmit = (event) => {\n    if (persons.length === 0) {\n      let personObj = { name: newName, number: newPhone };\n      return webService.create(personObj).then((response) => {\n        setPersons(persons.concat(response));\n      });\n    }\n    event.preventDefault();\n    const test = persons.filter((person) => {\n      return person.name === newName;\n    });\n    if (test.length >= 1) {\n      if (test[0].number !== newPhone) {\n        let answer = window.confirm(\n          `${newName} is already in database. Update phone number?`\n        );\n        if (answer) {\n          let editedObj = { ...test[0], number: newPhone };\n          return webService.edit(test[0].id, editedObj).then((editedPerson) => {\n            let newPhoneBook = persons.map((person) =>\n              person.id === test[0].id ? editedPerson : person\n            );\n            return setPersons(newPhoneBook);\n          });\n        }\n      }\n\n      if (test[0].number === newPhone) {\n        return alert(`${newName} already in database`);\n      }\n    }\n\n    let personObj = { name: newName, number: newPhone };\n\n    webService.create(personObj).then((response) => {\n      setPersons(persons.concat(response));\n      setNotification(`${newName} added successfully`);\n      setTimeout(() => {\n        setNotification(null);\n      }, 5000);\n    });\n  };\n\n  let handleDelete = (id) => {\n    webService\n      .del(id)\n      .then(() => {\n        setNotification(`deleted successfully`);\n        setTimeout(() => {\n          setNotification(null);\n        }, 5000);\n        setPersons(persons.filter((person) => person.id !== id));\n      })\n      .catch((err) => {\n        console.log('this ran');\n        let deleted = persons.filter((person) => person.id === id);\n        setError(`${deleted[0].name}`);\n        setTimeout(() => {\n          setError(null);\n        }, 5000);\n        setPersons(persons.filter((person) => person.id !== id));\n      });\n  };\n\n  useEffect(() => {\n    webService.getAll().then((phoneBook) => setPersons(phoneBook));\n  }, []);\n\n  const whatToShow = persons.filter((person) => {\n    return person.name.toLowerCase().includes(newFilter.toLowerCase());\n  });\n\n  return (\n    <div>\n      <Title text='Filter' />\n      <Filter newFilter={newFilter} setFilter={setFilter} />\n      <Title text='Phone Book' />\n      <PersonForm\n        handleSubmit={handleSubmit}\n        newName={newName}\n        setNewName={setNewName}\n        newPhone={newPhone}\n        s\n        setNewPhone={setNewPhone}\n      />\n      <Title text='Numbers' />\n      <Persons persons={whatToShow} handleDelete={handleDelete} />\n      <Notification message={notification} />\n      <Error message={error} />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport App from './App.js';\nimport './index.css';\n\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}